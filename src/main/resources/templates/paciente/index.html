<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Paciente - Inicio</title>
        <th:block th:replace="~{paciente/fragments/head.html::estilos}"></th:block>
    </head>
    <body>
        <!-- ======= Header ======= -->
        <div th:replace="~{paciente/fragments/header.html :: header(paciente = ${session.paciente})}">

        </div>
        <!-- End Header -->

        <!-- ======= Sidebar ======= -->
        <div th:replace="~{paciente/fragments/sidebar.html :: sidebar('inicio')}"></div>
        <!-- End Sidebar-->

        <main id="main" class="main site-content">

            <h1 class="encabezado" th:text="'Bienvenido, ' +${session.paciente.getNombreYApellido()}"></h1>
            <p class="text-center fw-medium mt-4" style="font-size: 1.2rem">Seleccione la sede de su preferencia para
                acceder a nuestros
                servicios</p>
            <p class="text-center fw-semibold my-3 fs-4" style="color: #435067">Sedes</p>

            <section id="Sedes">
                <div class="row align-items-start contenedor mx-0">
                    <div class="col-md-4" th:each="sede, iterStat : ${sedeList}" th:if="${iterStat.index} &lt; 3">
                        <a th:href="@{/Paciente/doctores(sede=${sede.idSede}, esp=0, pag=1)}">
                            <figure>
                                <img class="sedeImg" th:src="@{/Paciente/imageSede(idSede=${sede.idSede})}">
                                <div class="capa">
                                    <h6>CLINICAS</h6>
                                    <h2 class="fw-bold" style="color: darkblue" th:text="${sede.nombre}">San Isidro</h2>
                                    <p th:text="${sede.direccion}">Av. Javier Prado Este 1066, Lima.</p>
                                    <div class="d-flex align-items-center justify-content-end"
                                         style="margin-right: 30px;position: relative;bottom: 40px;">
                                        <span>Conoce la sede</span>
                                        <i class="fas fa-star ml-2 bi bi-arrow-right-circle-fill"
                                           style="color: darkgray"></i>
                                    </div>
                                </div>
                            </figure>
                        </a>
                    </div>
                </div>
            </section>

            <!-- ====== Footer ====== -->
            <div th:replace="~{paciente/fragments/footer.html :: footer}"></div>
            <!-- End footer -->

        </main>
        <!-- End #main -->
        <div id="loading"></div>

        <!-- Modal -->
        <div th:if="${citaAgendada}" class="modal fade" id="modal-cita" tabindex="-1" aria-labelledby="modal-pago-label"
             aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header row-cols-auto">
                        <button type="button" class="btn-close col-lg-2 fw-bold"
                                data-bs-dismiss="modal" aria-label="Cerrar"></button>
                    </div>
                    <div class="modal-body">
                        <div class="cardConfirmacion">
                            <div class="cardTitulo">
                                Cita agendada
                            </div>
                            <div class="cardCuerpo">
                                <div class="cardTexto">Para más detalles visite la sección CITAS</div>
                                <a class="btn botonAceptar" th:href="@{/Paciente/citas}">Revisar citas</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal error -->
        <div th:if="${error != null}" class="modal fade" id="modal-error" tabindex="-1" aria-labelledby="modal-pago-label"
             aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header row-cols-auto">
                        <h5 class="modal-title" th:text="${error}"></h5>
                        <button type="button" class="btn-close col-lg-2 fw-bold"
                                data-bs-dismiss="modal" aria-label="Cerrar"></button>
                    </div>
                    <div class="modal-body">
                        <div>La cita no pudo ser creada correctamente</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bootstrap CDN JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
                crossorigin="anonymous"></script>

        <!-- Template Main JS File -->
        <script th:src="@{/assets/js/main.js}"></script>

        <!-- JQuery CDN -->
        <script src="https://code.jquery.com/jquery-3.6.4.js"
                integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E=" crossorigin="anonymous"></script>

        <th:block th:replace="~{paciente/fragments/scripts.html::pacienteScripts}"></th:block>

        <script th:if="${citaAgendada}">
            $(document).ready(function () {
                $('#modal-cita').modal('show');
            });
        </script>

        <script th:if="${error}">
            $(document).ready(function () {
                $('#modal-error').modal('show');
            });
        </script>

        <script>
            var headerColorPaciente = "[[${headerColorPaciente}]]";
            localStorage.setItem('headerColorPaciente', headerColorPaciente);
            function updateHeaderColorPaciente() {
                var color = headerColorPaciente;
                document.getElementById('header').style.backgroundColor = color;
            }
            updateHeaderColorPaciente();
        </script>

    </body>
</html>